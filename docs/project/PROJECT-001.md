# PROJECT-001: Железо и платформа

Том проектной документации: целевая платформа, конфигурация, концепция «двух миров», перспективы железа.

---

## 3. Целевая платформа (железо)

### 3.1. Текущая конфигурация

| Параметр | Значение |
|----------|----------|
| Устройство | Мини-ПК GMKtec NucBox K8 Plus (Barebone) |
| Процессор | AMD Ryzen 7 8845HS (Zen 4, NPU Ryzen AI, 8 ядер) |
| ОЗУ | 64 ГБ |
| iGPU | AMD Radeon 780M (выделено 8 ГБ из ОЗУ в BIOS) |
| Хранилище (основной) | Samsung 990 Pro 2 ТБ (C: 300 ГБ Windows, D: ~1.7 ТБ данные) |
| Хранилище (планируется) | Второй SSD M.2 NVMe 1-2 ТБ для Fedora 43 |
| Порты расширения | OCuLink (для будущего подключения eGPU) |
| Сеть | AMD RZ616 Wi-Fi 6E 160MHz (MediaTek MT7922), Realtek 2.5G Ethernet ×2 |

### 3.2. Ожидаемые возможности (на 2026)

**Текущая конфигурация (iGPU):**
- LLM: модели 7B–14B комфортно; 30B-70B с квантованием (Q4_K_M, Q5_K_M)
- LightRAG: 50–100 тыс. страниц (200–500 МБ текста); индексация 100 стр. ~20–30 мин
- MS GraphRAG: до 5–10 тыс. страниц; индексация существенно медленнее, но глубже по аналитике

**С eGPU через OCuLink (перспектива):**
- LLM: модели до 120B с высоким квантованием (Q6, Q8)
- Скорость индексации: ускорение в 3-5 раз
- Параллельная работа: 2-3 модели одновременно
- Видеокарты: RTX 4070 Ti / 4080 (16 ГБ VRAM)

---

## 4. Целевой программный стек (детали)

### 4.1. Основные компоненты

| Компонент | Назначение |
|-----------|------------|
| **Windows 11 Pro** | Хост-ОС, визуализация, GUI-инструменты, Ollama, Cursor, Docker Desktop. |
| **WSL2 (Ubuntu)** | Разработка (проект `ferag`), Python, Docker-контейнеры, вычисления. |
| **Fedora 43** (планируется) | Нативная Linux-среда для тяжёлых вычислений, индексации больших корпусов, моделей 70B+. |
| **Cursor** | IDE (форк VS Code), интеграция с WSL, связь с Ollama (http://localhost:11434) для автодополнения. Cursor Agent CLI для помощи в терминале. |
| **Ollama** | Локальный запуск LLM (Llama 3.3 70B Q4_K_M, DeepSeek-R1) для извлечения триплетов, Schema Induction и диалога с пользователем. |
| **Docker Desktop** | Запуск БД (PostgreSQL, MillenniumDB) и сервисов RAG в контейнерах. |
| **MS GraphRAG** | Фреймворк для построения графа знаний с community detection и entity resolution. Основной инструмент извлечения триплетов. |
| **PostgreSQL 16** | Реляционная СУБД как основа multi-model решения (граф + реляционная + векторный поиск). |
| **Apache AGE** | Графовое расширение PostgreSQL (Property Graph, Cypher). Рабочий кэш для быстрых запросов. |
| **pgvector** | Расширение PostgreSQL для векторного поиска (эмбеддинги, семантический поиск для RAG). |
| **Apache Jena Fuseki** | RDF/SPARQL 1.1 сервер. Источник истины для онтологии (OWL/RDF) с полной поддержкой OWL reasoning и RDFS inference. |
| **LlamaIndex** | Библиотека для RAG и Schema Induction (извлечение онтологии из триплетов). |
| **LangChain** | Библиотека для построения RAG-пайплайнов и диалога с пользователем. |

### 4.2. Инструменты визуализации и работы с онтологиями

| Инструмент | Назначение | Платформа |
|------------|------------|-----------|
| **WebProtégé** | Веб-редактор онтологий (OWL, RDF), collaborative, 68K+ проектов. Рекомендуется вместо desktop Protégé. | Веб (https://webprotege.stanford.edu) |
| **Protégé Desktop** | Десктопный редактор онтологий (OWL, RDF), визуализация классов и отношений. Опциональная альтернатива WebProtégé. | Windows |
| **pgAdmin** | Веб-интерфейс для управления PostgreSQL, визуализация данных, выполнение SQL/Cypher запросов | Windows/WSL |
| **Apache AGE Viewer** | Веб-интерфейс для визуализации графов Apache AGE (опционально) | Windows/WSL |
| **QGIS** | Работа с картографическими данными, геопривязка сущностей из графа | Windows |

---

## Концепция «Двух Миров» и развитие

### Текущее состояние (Этап 1)

**Windows 11 + WSL2 (Ubuntu)** — единая система на Samsung 990 Pro

**Готово:**
- Концепция и философская основа (диалектический подход)
- Выбор железа и стека
- Настройка Windows 11 Pro (драйверы AMD, Wi‑Fi RZ616, NPU, время)
- WSL2 (Ubuntu) перенесена на диск D:
- Cursor с интеграцией WSL и Ollama
- Проект `ferag` создан в WSL
- Docker Desktop (WSL 2) установлен и проверен

**В процессе:**
- Первый контейнер графовой БД (Neo4j/FalkorDB)
- Пайплайн LightRAG с привязкой к онтологии
- Разработка базовой онтологии в Protégé

### Целевое состояние (Этап 2, планируется)

**Dual-boot: Windows 11 + Fedora 43** — разделение функций

#### Распределение систем

| Система | Диск | Функции |
|---------|------|---------|
| **Windows 11 Pro** | Samsung 990 Pro (C:, 300 ГБ) | **"Станция управления"**:<br>- Визуализация (Neo4j Browser, Protégé, QGIS)<br>- Разработка (Cursor)<br>- Чаты с Ollama<br>- Создание онтологий |
| **Fedora 43** | Второй SSD 1-2 ТБ | **"Лаборатория вычислений"**:<br>- Тяжёлая индексация (GraphRAG)<br>- Модели 70B+ с квантованием<br>- Docker-контейнеры (Neo4j, FalkorDB)<br>- Нативная производительность |
| **Общий раздел** | Samsung 990 Pro (D:, ~1.7 ТБ) | **Единое хранилище**:<br>- Модели Ollama (D:\AI_MODELS)<br>- Проекты (D:\projects)<br>- NTFS (читается обеими ОС) |

#### Преимущества разделения

1. **Производительность**: Fedora даёт +5-10% к скорости работы LLM
2. **Стабильность**: Долгие вычисления в Linux не блокируют Windows
3. **Гибкость**: Работа с онтологией в Windows, пока идёт индексация в Fedora
4. **Память**: Fedora может использовать все 64 ГБ без конкуренции
5. **Экономия**: Модели не дублируются (читаются с D: обеими системами)

### Этап 3: Усиление железа (опционально)

**eGPU через OCuLink:**
- Порт OCuLink в GMKtec NucBox K8 Plus
- Рассматриваемые видеокарты: RTX 4070 Ti / 4080 (16 ГБ VRAM)
- Ускорение индексации в 3-5 раз
- Возможность работы с моделями 120B+
- В Fedora поддержка eGPU через OCuLink часто работает "из коробки"

| Параметр | Текущее (iGPU) | С eGPU (RTX 4070 Ti) |
|----------|----------------|----------------------|
| VRAM | 8 ГБ | 16 ГБ |
| Скорость индексации | ~10-20 с/страница | ~3-5 с/страница |
| Максимальная модель | 30B (Q4) | 70B+ (Q5/Q6) |
| Параллельные задачи | 1 LLM | 2-3 LLM одновременно |

### Этап 4: Интеграция с картографией

- Автоматическая геопривязка сущностей из текста
- Пространственные запросы по графу (QGIS)
- Визуализация связей на картах
- Временная ось исторических событий

---

[← К обзору](PROJECT.md)
